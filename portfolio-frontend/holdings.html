<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Holdings - Portfolio Manager</title>

<link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600&display=swap" rel="stylesheet">


<style>

/******** GLOBAL ********/

body{
    margin:0;
    font-family:'Inter',sans-serif;
    background:#f4f6fb;
}

.container{
    display:flex;
}



/******** MAIN ********/

.main{
    flex:1;
    padding:40px;
}

/******** HEADER ********/

.topbar{
    display:flex;
    justify-content:space-between;
    align-items:center;
}

/******** BUTTON ********/

.add-btn{
    background:#4f46e5;
    color:white;
    border:none;
    padding:10px 18px;
    border-radius:8px;
    cursor:pointer;
    font-weight:600;
}

.add-btn:hover{
    background:#4338ca;
}

/******** SUMMARY ********/

.summary{
    display:flex;
    gap:20px;
    margin-top:20px;
}

.card{
    background:white;
    padding:20px;
    border-radius:12px;
    box-shadow:0px 6px 14px rgba(0,0,0,0.05);
}

/******** TABLE ********/

.table-container{
    margin-top:25px;
    background:white;
    padding:20px;
    border-radius:12px;
}

table{
    width:100%;
    border-collapse:collapse;
}

th,td{
    padding:14px;
    border-bottom:1px solid #eee;
}

th{
    background:#f1f5f9;
    text-align:left;
}

tr:hover{
    background:#f9fafb;
}

.delete-btn{
    background:#ef4444;
    border:none;
    color:white;
    padding:6px 10px;
    border-radius:6px;
    cursor:pointer;
}

/******** MODAL ********/

.modal{
    display:none;
    position:fixed;
    inset:0;
    background:rgba(0,0,0,0.4);
}

.modal-content{
    background:white;
    width:420px;
    padding:25px;
    border-radius:12px;
    margin:120px auto;
}

.modal-content input{
    width:100%;
    padding:10px;
    margin-bottom:12px;
    border-radius:8px;
    border:1px solid #ddd;
}

.modal-actions{
    display:flex;
    justify-content:space-between;
}

.cancel{
    background:#e5e7eb;
    color:black;
}

</style>
</head>


<body>
<div class="container">

    <!-- Sidebar will load here -->
    <div id="sidebar-container"></div>

    <main class="main">
        <!-- page content -->
    </main>

</div>

<script src="sidebar.js"></script>

<div class="container">

<!-- SIDEBAR -->

<aside class="sidebar">

<h2>Portfolio Manager</h2>

<ul>
    <li><a href="index.html">Dashboard</a></li>
    <li class="active"><a href="holdings.html">Holdings</a></li>
    <li><a href="transactions.html">Transactions</a></li>
    <li><a href="analytics.html">Analytics</a></li>
    <li><a href="settings.html">Settings</a></li>
    <li><a href="subscriptions.html">Subscriptions</a></li>

</ul>

</aside>



<!-- MAIN -->

<main class="main">

<div class="topbar">
<h1>Your Holdings</h1>
<button class="add-btn" onclick="openModal()">+ Add Stock</button>
</div>


<!-- SUMMARY -->

<div class="summary">

<div class="card">
<h3>Total Invested</h3>
<p id="totalInvested">$0</p>
</div>

<div class="card">
<h3>Current Value</h3>
<p id="currentValue">$0</p>
</div>

<div class="card">
<h3>Total Profit/Loss</h3>
<p id="totalPL">$0</p>
</div>

</div>



<!-- TABLE -->

<div class="table-container">

<table id="holdingsTable">

<thead>
<tr>
<th>Ticker</th>
<th>Quantity</th>
<th>Buy Price</th>
<th>Current Price</th>
<th>Invested</th>
<th>Market Value</th>
<th>P/L</th>
<th>Action</th>
</tr>
</thead>

<tbody></tbody>

</table>

</div>

</main>

</div>



<!-- ADD STOCK MODAL -->

<div id="modal" class="modal">

<div class="modal-content">

<h2>Add Stock</h2>

<label>Ticker</label>
<input id="tickerInput" placeholder="AAPL">

<label>Quantity</label>
<input id="qtyInput" type="number">

<label>Buy Price</label>
<input id="priceInput" type="number">

<div class="modal-actions">
<button class="add-btn" onclick="addStock()">Add</button>
<button class="cancel" onclick="closeModal()">Cancel</button>
</div>

</div>
</div>



<script>

/******** SAMPLE DATA ********/

let holdings = [

{ticker:"AAPL", qty:10, buy:150, current:185},
{ticker:"MSFT", qty:6, buy:220, current:260}

];


/******** MODAL ********/

function openModal(){
document.getElementById("modal").style.display="block";
}

function closeModal(){
document.getElementById("modal").style.display="none";
}



/******** ADD STOCK ********/

function addStock(){

const ticker = document.getElementById("tickerInput").value.toUpperCase();
const qty = Number(document.getElementById("qtyInput").value);
const buy = Number(document.getElementById("priceInput").value);

if(!ticker || !qty || !buy){
alert("Please fill all fields");
return;
}

// Later current price comes from backend
const stock = {
ticker,
qty,
buy,
current:buy
};

holdings.push(stock);

renderTable();
closeModal();
}



/******** DELETE STOCK ********/

function deleteStock(index){
holdings.splice(index,1);
renderTable();
}



/******** RENDER TABLE ********/

function renderTable(){

const table = document.querySelector("#holdingsTable tbody");
table.innerHTML="";

let totalInvested = 0;
let totalCurrent = 0;

holdings.forEach((s,index)=>{

const invested = s.qty * s.buy;
const value = s.qty * s.current;
const pl = value - invested;

totalInvested += invested;
totalCurrent += value;

table.innerHTML += `
<tr>
<td>${s.ticker}</td>
<td>${s.qty}</td>
<td>$${s.buy}</td>
<td>$${s.current}</td>
<td>$${invested}</td>
<td>$${value}</td>
<td style="color:${pl>=0?'green':'red'}">$${pl}</td>
<td>
<button class="delete-btn" onclick="deleteStock(${index})">
Delete
</button>
</td>
</tr>
`;

});

document.getElementById("totalInvested").innerText="$"+totalInvested;
document.getElementById("currentValue").innerText="$"+totalCurrent;
document.getElementById("totalPL").innerText="$"+(totalCurrent-totalInvested);

}

renderTable();

</script>

</body>
</html>
